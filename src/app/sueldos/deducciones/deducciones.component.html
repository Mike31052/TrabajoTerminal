<div class="container">
  <div class="deducciones-container p-3">
    <h5>Deducciones personales</h5>
    <p>Da clic en el botón "Actualizar" para verificar que el Monto total deducible y las deducciones precargadas están mostrando los valores actualizados por la modificación de la información.</p>

    <div class="d-flex justify-content-between align-items-center mb-3">
      <div>
        <label for="montoTotalDeducible" class="form-label">Monto total deducible</label>
        <input type="text" class="form-control" id="montoTotalDeducible" value="46,420" disabled />
      </div>
      <div>
        <label for="montoPorDeducir" class="form-label">Monto total por deducir</label>
        <input type="number" class="form-control" [(ngModel)]="montoPorDeducir" />
      </div>
      <button class="btn btn-primary mt-4">Actualizar</button>
    </div>

    <div class="deducciones-grid">
      <div 
        class="deduccion-card" 
        *ngFor="let deduccion of deducciones" 
        (click)="selectDeduccion(deduccion)"
        [class.selected]="deduccion === selectedDeduccion">
        <div class="deduccion-icon">
          <i [class]="deduccion.iconClass"></i>
        </div>
        <div class="deduccion-text">
          <h6>{{ deduccion.title }}</h6>
          <span class="badge bg-danger">{{ deduccion.count }}</span>
        </div>
      </div>
    </div>

    <p class="instructions mt-4">
      Instrucciones: selecciona un tipo de deducción para visualizar tus deducciones precargadas, de lo contrario da clic en el botón agregar.
    </p>


    <!-- Botón Agregar -->
    <button class="btn btn-primary mb-4" (click)="addDeduccion()">Agregar</button>

    <!-- Tabla de detalles -->
    <div *ngIf="selectedDeduccion">
      <h5>{{ selectedDeduccion.title }}</h5>
      <table class="table">
        <thead>
          <tr>
            <th>RFC del emisor</th>
            <th>Nombre, denominación o razón social</th>
            <th>Fecha emisión</th>
            <th>Descripción</th>
            <th>Importe</th>
            <th>Monto deducible</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="!selectedDeduccion.data.length">
            <td colspan="6" class="text-center">No se encontraron registros</td>
          </tr>
          <tr *ngFor="let item of selectedDeduccion.data">
            <td>{{ item.rfc }}</td>
            <td>{{ item.nombre }}</td>
            <td>{{ item.fechaEmision }}</td>
            <td>{{ item.descripcion }}</td>
            <td>{{ item.importe }}</td>
            <td>{{ item.montoDeducible }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
